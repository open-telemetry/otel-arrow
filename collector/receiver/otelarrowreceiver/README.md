# OTel-Arrow Receiver

<!-- status autogenerated section -->
| Status        |           |
| ------------- |-----------|
| Stability     | [development]: metrics, traces, logs   |
| Distributions | [contrib] |
| Issues        | [![Open issues](https://img.shields.io/github/issues-search/open-telemetry/opentelemetry-collector-contrib?query=is%3Aissue%20is%3Aopen%20label%3Areceiver%2Fotelarrow%20&label=open&color=orange&logo=opentelemetry)](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues?q=is%3Aopen+is%3Aissue+label%3Areceiver%2Fotelarrow) [![Closed issues](https://img.shields.io/github/issues-search/open-telemetry/opentelemetry-collector-contrib?query=is%3Aissue%20is%3Aclosed%20label%3Areceiver%2Fotelarrow%20&label=closed&color=blue&logo=opentelemetry)](https://github.com/open-telemetry/opentelemetry-collector-contrib/issues?q=is%3Aclosed+is%3Aissue+label%3Areceiver%2Fotelarrow) |

[development]: https://github.com/open-telemetry/opentelemetry-collector#development
[contrib]: https://github.com/open-telemetry/opentelemetry-collector-releases/tree/main/distributions/otelcol-contrib
<!-- end autogenerated section -->

Receives telemetry data using the
[OTel-Arrow](https://github.com/open-telemetry/otel-arrow) protocol
via gRPC and standard [OTLP](
https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/protocol/otlp.md)
protocol via gRPC or HTTP.

## Getting Started

The OTel-Arrow receiver is an extension of the core OpenTelemetry
Collector [OTLP
receiver](https://github.com/open-telemetry/opentelemetry-collector/tree/main/receiver/otlpreceiver)
component with additional support for the
[OTel-Arrow](https://github.com/open-telemetry/otel-arrow) protocol.

OTel-Arrow supports column-oriented data transport using the Apache
Arrow data format.  The OTel-Arrow exporter converts OTLP data into an
optimized representation and then sends rows of data using Apache
Arrow to encode the stream.  This component contains logic to reverse
the process used in the OTel-Arrow exporter.

The use of an OTel-Arrow exporter-receiver pair is recommended when
the network is expensive.  Typically, expect to see a 50% reduction in
bandwidth compared with the same data being sent using standard OTLP,
unary gRPC, and zstd compression.

This component includes all the features and configuration of the core
OTLP receiver, making it possible to upgrade from the core component
simply by replacing "otlp" with "otelarrow" as the component name in
the collector configuration.

To enable the OTel-Arrow receiver, include it in the list of receivers
for a pipeline.  No further configuration is needed.  This receiver
listens on the standard OTLP/gRPC port 4317 and serves standard OTLP
over gRPC out of the box.

```yaml
receivers:
  otelarrow:
```

## Advanced Configuration

Users may wish to configure gRPC settings, for example:

```
receivers:
  otelarrow:
    protocols:
      grpc:
	    ...
```

- `endpoint` (default = 0.0.0.0:4317 for grpc protocol, 0.0.0.0:4318 http protocol):
  host:port to which the receiver is going to receive data. The valid syntax is
  described at https://github.com/grpc/grpc/blob/master/doc/naming.md.

Several common configuration structures provide additional capabilities automatically:

- [gRPC settings](https://github.com/open-telemetry/opentelemetry-collector/blob/main/config/configgrpc/README.md)
- [TLS and mTLS settings](https://github.com/open-telemetry/opentelemetry-collector/blob/main/config/configtls/README.md)

Keepalive settings are vital to the operation of OTel-Arrow, because
longer-lived streams use more memory.  Since every stream of data is
different, we recommend experimenting to find a good balance between
memory usage and stream lifetime.

```
receivers:
  otelarrow:
    protocols:
      grpc:
		keepalive:
          server_parameters:
            max_connection_age: 1m
            max_connection_age_grace: 10m
```

In the example configuration above, OTel-Arrow streams will have reset
is initiated after 10 minutes and be forcibly shut down one minute
later.

## HTTP-specific documentation

To enable optional OTLP/HTTP support, the HTTP protocol must be
explicitly listed.  It will use port 4318 by default.

```
receivers:
  otelarrow:
    protocols:
      http:
```

See the core OTLP receiver for documentation specific to HTTP
connections, including:

- [Writing with HTTP/JSON](https://github.com/open-telemetry/opentelemetry-collector/tree/main/receiver/otlpreceiver#writing-with-httpjson)
- [CORS (Cross-origin resource sharing)](https://github.com/open-telemetry/opentelemetry-collector/tree/main/receiver/otlpreceiver#cors-cross-origin-resource-sharing)
