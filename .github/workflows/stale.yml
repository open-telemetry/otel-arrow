name: 'Mark stale issues and pull requests'

on:
  schedule:
    # Run daily at 1:30 UTC
    - cron: '30 1 * * *'
  workflow_dispatch:

permissions:
  contents: read

jobs:
  stale:
    permissions:
      issues: write
      pull-requests: write
    runs-on: ubuntu-latest
    steps:
      - uses: actions/stale@997185467fa4f803885201cee163a9f38240193d # v10.1.1
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          # Issue settings
          stale-issue-message: >
            This issue has been marked as stale due to lack of recent activity.
            It will be closed in 30 days if no further activity occurs.
            If this issue is still relevant, please comment or remove the stale label.
          stale-issue-label: 'stale'
          days-before-issue-stale: 180
          days-before-issue-close: 30
          exempt-issue-labels: 'do-not-stale'
          # Pull request settings
          stale-pr-message: >
            This pull request has been marked as stale due to lack of recent activity.
            It will be closed in 30 days if no further activity occurs.
            If this PR is still relevant, please comment or push new commits to keep it active.
          stale-pr-label: 'stale'
          days-before-pr-stale: 14
          days-before-pr-close: 30
          exempt-pr-labels: 'do-not-stale'
          # General settings
          operations-per-run: 100
          remove-stale-when-updated: true
          ascending: true
